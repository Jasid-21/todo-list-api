(function(){"use strict";var e={8326:function(e,t,n){var a=n(9242),o=n(3396);function s(e,t){const n=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(n)}var r=n(89);const l={},i=(0,r.Z)(l,[["render",s]]);var u=i,c=n(2483);const d={class:"home"},p={class:"body_container"};function m(e,t,n,a,s,r){const l=(0,o.up)("Navbar"),i=(0,o.up)("TaskCreator"),u=(0,o.up)("TaskCard");return(0,o.wg)(),(0,o.iD)("div",d,[(0,o.Wm)(l),(0,o._)("div",p,[(0,o.Wm)(i),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.data,((e,t)=>((0,o.wg)(),(0,o.j4)(u,{key:t,name:e.Task_name,done_state:e.Done,max_date:e.Max_date,desc:e.task_desc,task_id:e.Id},null,8,["name","done_state","max_date","desc","task_id"])))),128))])])}var _=n(7139);const f=e=>((0,o.dD)("data-v-48b9e596"),e=e(),(0,o.Cn)(),e),v=f((()=>(0,o._)("h1",null,"My Tasks",-1))),k={key:0},g=["onClick"];function w(e,t,n,a,s,r){const l=(0,o.up)("router-link"),i=(0,o.up)("CollapseIcon");return(0,o.wg)(),(0,o.iD)("nav",null,[v,a.size>=480?((0,o.wg)(),(0,o.iD)("ul",k,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.options,((e,t)=>((0,o.wg)(),(0,o.iD)("li",{key:t,onClick:t=>a.setFilter(e.done),class:(0,_.C_)({active:e.active})},(0,_.zw)(e.name),11,g)))),128)),(0,o._)("li",null,[a.logged?((0,o.wg)(),(0,o.j4)(l,{key:0,to:"/login",onClick:a.logout},{default:(0,o.w5)((()=>[(0,o.Uk)("Logout")])),_:1},8,["onClick"])):((0,o.wg)(),(0,o.j4)(l,{key:1,to:"/login"},{default:(0,o.w5)((()=>[(0,o.Uk)("Login")])),_:1}))])])):(0,o.kq)("",!0),a.size<480?((0,o.wg)(),(0,o.j4)(i,{key:1,options:a.options,onSetFilter:t[0]||(t[0]=e=>a.setFilter(e)),onLogout:a.logout},null,8,["options","onLogout"])):(0,o.kq)("",!0)])}var b=n(4870);const h=e=>((0,o.dD)("data-v-383fbb2a"),e=e(),(0,o.Cn)(),e),y={class:"collapse-icon-container"},D=h((()=>(0,o._)("div",{class:"icon"},null,-1))),O=[D],T=["onClick"];function C(e,t,n,a,s,r){const l=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",y,[(0,o._)("div",{class:"collapse-icon",onClick:t[0]||(t[0]=()=>a.display=!a.display)},O),(0,o._)("ul",{class:(0,_.C_)(["collapse-list",{displayed:a.display}])},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.options,((e,t)=>((0,o.wg)(),(0,o.iD)("li",{key:t,onClick:t=>a.setFilter(e.done)},(0,_.zw)(e.name),9,T)))),128)),(0,o._)("li",null,[(0,o.Wm)(l,{to:"/login",onClick:a.logout},{default:(0,o.w5)((()=>[(0,o.Uk)("Logout")])),_:1},8,["onClick"])])],2)])}var I={name:"CollapseIcon",props:["options"],setup(e,{emit:t}){const n=(0,b.iH)(!1),a=e=>{t("setFilter",e)},o=()=>{t("logout")};return{display:n,setFilter:a,logout:o}}};const x=(0,r.Z)(I,[["render",C],["__scopeId","data-v-383fbb2a"]]);var S=x,$=n(65),F={name:"Navbar",components:{CollapseIcon:S},setup(){const e=(0,$.oR)(),t=(0,c.tv)(),n=e.state.base_url,a=(0,b.iH)([{name:"All",done:null,active:!0},{name:"Pending",done:!1,active:!1},{name:"Done",done:!0,active:!1}]),s=(0,b.iH)(0),r=t=>{e.commit("setFilter",t),a.value.forEach((e=>{e.done==t?e.active=!0:e.active=!1}))},l=()=>{window.addEventListener("resize",(()=>{i()}))},i=()=>{s.value=window.innerWidth},u=(0,b.iH)(!1),d=localStorage.getItem("TODO_lst_user_id"),p=localStorage.getItem("TODO_lst_token"),m=()=>{const e=`${n}/logout?token=${p}`;fetch(e,{method:"POST"}).then((e=>{200==e.status&&(localStorage.removeItem("TODO_lst_user_id"),localStorage.removeItem("TODO_lst_token"),localStorage.removeItem("TODO_lst_username"))}))};return d&&p&&(u.value=!0),(0,o.bv)((()=>{u.value||t.replace("/login"),l(),i()})),{options:a,size:s,logged:u,setFilter:r,logout:m}}};const A=(0,r.Z)(F,[["render",w],["__scopeId","data-v-48b9e596"]]);var H=A;const U={class:"task_card"},j={class:"card-header"},P={class:"max_date"},M={class:"name-title"},L={class:"description"},V={class:"btn-options"};function z(e,t,n,s,r,l){return(0,o.wg)(),(0,o.iD)("div",U,[(0,o._)("div",j,[(0,o._)("span",P,(0,_.zw)(""!=n.max_date?n.max_date:"Not set"),1),(0,o._)("h4",{class:(0,_.C_)(["done_state",{done:1==n.done_state}])},(0,_.zw)(n.done_state?"Done":"Pending"),3)]),(0,o._)("h3",M,(0,_.zw)(n.name),1),(0,o._)("div",L,(0,_.zw)(""!=n.desc?n.desc:"No description available"),1),(0,o._)("div",V,[(0,o._)("button",{class:"delete-btn",onClick:t[0]||(t[0]=(0,a.iM)(((...e)=>s.deleteTask&&s.deleteTask(...e)),["prevent"]))}," x "),n.done_state?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("button",{key:0,class:"mark_done",onClick:t[1]||(t[1]=(0,a.iM)(((...e)=>s.markAsDone&&s.markAsDone(...e)),["prevent"]))}," Mark as done "))])])}var R=n(2492),E=n.n(R),Z={name:"TaskCard",props:["task_id","name","done_state","max_date","desc"],setup(e){const t=e.task_id,n=localStorage.getItem("TODO_lst_user_id"),a=localStorage.getItem("TODO_lst_token"),o=(0,$.oR)(),s=o.state.base_url,r=async()=>{const e=await E().fire({title:"Delete confirmation",text:"Are you sure you want to delete this task?",icon:"warning",showCancelButton:!0,focusCancel:!0});if(!e.isConfirmed)return;const r=`${s}/delete_task?user_id=${n}&token=${a}&task_id=${t}`,l=await fetch(r,{method:"POST"}),i=l.ok;if(i)E().fire({title:"Delete confirmed",text:"Task deleted successfully!",icon:"success"}),o.dispatch("deleteTask",t);else{const e=await l.json();if(!e.msg)return;E().fire({title:"App error",text:e.msg,icon:"error"})}},l=async()=>{const e=await E().fire({title:"Done confirmation",text:"Have you done this task alredy?",icon:"question",showCancelButton:!0,focusCancel:!0});if(!e.isConfirmed)return;const r=`${s}/update_task_state?user_id=${n}&token=${a}&task_id=${t}`,l=await fetch(r,{method:"POST"}),i=l.ok;if(i)E().fire({title:"App message",title:"Status updated",icon:"success"}),o.dispatch("markAsDone",t);else{const e=await l.json();if(!e.msg)return;E().fire({title:"App error",text:e.msg,icon:"error"})}};return{deleteTask:r,markAsDone:l}}};const q=(0,r.Z)(Z,[["render",z],["__scopeId","data-v-0dd97d2d"]]);var N=q;const W=e=>((0,o.dD)("data-v-78a6cda9"),e=e(),(0,o.Cn)(),e),K={key:0,class:"circle"},Y=W((()=>(0,o._)("span",null,"+",-1))),B=[Y],G=W((()=>(0,o._)("h4",null,"New task form",-1)));function J(e,t,n,s,r,l){return(0,o.wg)(),(0,o.iD)("div",{class:"taskCreator",onClick:t[6]||(t[6]=()=>s.formActive=!s.formActive)},[s.formActive?((0,o.wg)(),(0,o.iD)("form",{key:1,onClick:t[5]||(t[5]=(0,a.iM)((()=>{}),["stop"]))},[(0,o._)("button",{class:"close_btn",onClick:t[0]||(t[0]=(0,a.iM)((()=>s.formActive=!1),["prevent"]))},"x"),G,(0,o.wy)((0,o._)("input",{type:"text",placeholder:"Type a task name...","onUpdate:modelValue":t[1]||(t[1]=e=>s.name=e)},null,512),[[a.nr,s.name]]),(0,o.wy)((0,o._)("textarea",{cols:"30",rows:"10","onUpdate:modelValue":t[2]||(t[2]=e=>s.desc=e),placeholder:"Type a description (optional)..."},null,512),[[a.nr,s.desc]]),(0,o.wy)((0,o._)("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=e=>s.date=e)},null,512),[[a.nr,s.date]]),(0,o._)("input",{type:"submit",value:"Create!",onClick:t[4]||(t[4]=(0,a.iM)(((...e)=>s.createTask&&s.createTask(...e)),["prevent"]))})])):((0,o.wg)(),(0,o.iD)("div",K,B))])}var Q={name:"taskCreator",setup(){const e=(0,$.oR)(),t=e.state.base_url,n=(0,b.iH)(!1),a=(0,b.iH)(""),o=(0,b.iH)(""),s=(0,b.iH)((new Date).toISOString().slice(0,10)),r=async()=>{const n=localStorage.getItem("TODO_lst_token"),r=localStorage.getItem("TODO_lst_user_id"),l=`${t}/new_task?token=${n}&user_id=${r}&name=${a.value}&desc=${o.value}&date=${s.value}`,i=await fetch(l,{method:"POST"}),u=i.ok,c=await i.json();if(!u)return void E().fire({title:"App error",text:c.msg,icon:"error"});const d={Id:c.task_id,Task_name:a.value,task_desc:o.value,Max_date:s.value,User_id:r,Done:!1};e.dispatch("newTask",d),a.value="",o.value=""};return{formActive:n,name:a,desc:o,date:s,createTask:r}}};const X=(0,r.Z)(Q,[["render",J],["__scopeId","data-v-78a6cda9"]]);var ee=X,te={name:"HomeView",components:{Navbar:H,TaskCard:N,TaskCreator:ee},setup(){const e=(0,$.oR)(),t=e.state.base_url,n=(0,o.Fl)((()=>e.state.filtered));return(0,o.bv)((async()=>{const n=localStorage.getItem("TODO_lst_user_id"),a=localStorage.getItem("TODO_lst_token"),o=`${t}/home_info?user_id=${n}&token=${a}`,s=await fetch(o,{method:"GET"}),r=s.status;if(200==r){const t=await s.json();e.commit("setAll",t)}})),{data:n}}};const ne=(0,r.Z)(te,[["render",m],["__scopeId","data-v-a6c3445a"]]);var ae=ne;const oe=e=>((0,o.dD)("data-v-23ba9438"),e=e(),(0,o.Cn)(),e),se={class:"masterContainer"},re=oe((()=>(0,o._)("h2",null,"Login Form",-1))),le=oe((()=>(0,o._)("label",{for:"user"},"Username:",-1))),ie=oe((()=>(0,o._)("br",null,null,-1))),ue=oe((()=>(0,o._)("label",{for:"pass"},"Password:",-1))),ce=oe((()=>(0,o._)("br",null,null,-1))),de=oe((()=>(0,o._)("input",{type:"submit",value:"Login!"},null,-1))),pe=oe((()=>(0,o._)("br",null,null,-1)));function me(e,t,n,s,r,l){const i=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",se,[(0,o._)("form",{class:"loginForm",onSubmit:t[2]||(t[2]=(0,a.iM)(((...e)=>s.submit&&s.submit(...e)),["prevent"]))},[re,le,(0,o.wy)((0,o._)("input",{type:"text",name:"user",placeholder:"Ex: sefirot123","onUpdate:modelValue":t[0]||(t[0]=e=>s.user=e)},null,512),[[a.nr,s.user]]),ie,ue,(0,o.wy)((0,o._)("input",{type:"password",name:"pass","onUpdate:modelValue":t[1]||(t[1]=e=>s.pass=e)},null,512),[[a.nr,s.pass]]),ce,de,pe,(0,o._)("span",null,[(0,o.Uk)(" Do not have an account? "),(0,o.Wm)(i,{to:"/register"},{default:(0,o.w5)((()=>[(0,o.Uk)("Signup!!")])),_:1})])],32)])}var _e={name:"LoginView",setup(){const e=(0,$.oR)(),t=(0,c.tv)(),n=e.state.base_url,a=(0,b.iH)(""),o=(0,b.iH)(""),s=async()=>{const e=`${n}/login?username=${a.value}&password=${o.value}`,s=await fetch(e,{method:"POST"}),r=s.ok;if(!r)return void E().fire("Login Error",s.statusText,"error");const l=await s.json();localStorage.setItem("TODO_lst_token",l.token),localStorage.setItem("TODO_lst_user_id",l.user_id),localStorage.setItem("TODO_lst_username",a.value),t.replace("/")};return{user:a,pass:o,submit:s}}};const fe=(0,r.Z)(_e,[["render",me],["__scopeId","data-v-23ba9438"]]);var ve=fe;const ke=e=>((0,o.dD)("data-v-e00c7a42"),e=e(),(0,o.Cn)(),e),ge={class:"masterContainer"},we=ke((()=>(0,o._)("h2",null,"Register Form",-1))),be=ke((()=>(0,o._)("label",{for:"user"},"Username:",-1))),he=ke((()=>(0,o._)("br",null,null,-1))),ye=ke((()=>(0,o._)("label",{for:"pass"},"Password:",-1))),De=ke((()=>(0,o._)("br",null,null,-1))),Oe=ke((()=>(0,o._)("label",{for:"conf"},"Confirm password:",-1))),Te=ke((()=>(0,o._)("br",null,null,-1))),Ce=ke((()=>(0,o._)("input",{type:"submit",value:"Register!"},null,-1))),Ie=ke((()=>(0,o._)("br",null,null,-1)));function xe(e,t,n,s,r,l){const i=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",ge,[(0,o._)("form",{class:"loginForm",onSubmit:t[3]||(t[3]=(0,a.iM)(((...e)=>s.submit&&s.submit(...e)),["prevent"]))},[we,be,(0,o.wy)((0,o._)("input",{type:"text",name:"user",placeholder:"Ex: sefirot123","onUpdate:modelValue":t[0]||(t[0]=e=>s.user=e),required:""},null,512),[[a.nr,s.user]]),he,ye,(0,o.wy)((0,o._)("input",{type:"password",name:"pass","onUpdate:modelValue":t[1]||(t[1]=e=>s.pass=e),required:""},null,512),[[a.nr,s.pass]]),De,Oe,(0,o.wy)((0,o._)("input",{type:"password",name:"conf","onUpdate:modelValue":t[2]||(t[2]=e=>s.conf=e),required:""},null,512),[[a.nr,s.conf]]),Te,Ce,Ie,(0,o._)("span",null,[(0,o.Uk)(" Alredy have an account? "),(0,o.Wm)(i,{to:"/login"},{default:(0,o.w5)((()=>[(0,o.Uk)("Login!!")])),_:1})])],32)])}var Se={name:"RegisterView",setup(){const e=(0,c.tv)(),t=(0,$.oR)(),n=t.state.base_url,a=(0,b.iH)(""),o=(0,b.iH)(""),s=(0,b.iH)(""),r=async()=>{if(o.value!=s.value)return void E().fire({title:"App message",text:"Password and confirmation must match...",icon:"info"});const t=`${n}/register?username=${a.value}&password=${o.value}`,r=await fetch(t,{method:"POST"}),l=r.ok;if(!l)return;const i=await r.json();localStorage.setItem("TODO_lst_token",i.token),localStorage.setItem("TODO_lst_user_id",i.user_id),localStorage.setItem("TODO_lst_username",a.value),e.replace("/")};return{user:a,pass:o,conf:s,submit:r}}};const $e=(0,r.Z)(Se,[["render",xe],["__scopeId","data-v-e00c7a42"]]);var Fe=$e;const Ae=[{path:"/",name:"home",component:ae},{path:"/login",name:"login",component:ve},{path:"/register",name:"register",component:Fe}],He=(0,c.p7)({history:(0,c.PO)(),routes:Ae});var Ue=He,je=(n(7658),(0,$.MT)({state:{all:[],filtered:[],doneFilter:null,base_url:""},mutations:{setAll:(e,t)=>{e.all=t,e.filtered=t},setFilter:(e,t)=>{if(e.doneFilter=t,null==t)return void(e.filtered=e.all);const n=e.all.filter((e=>e.Done==t));e.filtered=n,console.log(e.filtered)},newTask:(e,t)=>{e.all.push(t)},deleteTask:(e,t)=>{const n=e.all.findIndex((e=>e.Id==t));e.all.splice(n,1)},markAsDone:(e,t)=>{e.all.forEach((e=>{e.Id==t&&(e.Done=!0)}))}},actions:{newTask:({commit:e,state:t},n)=>{e("newTask",n),e("setFilter",t.doneFilter)},deleteTask:({commit:e,state:t},n)=>{e("deleteTask",n),e("setFilter",t.doneFilter)},markAsDone:({commit:e,state:t},n)=>{e("markAsDone",n),e("setFilter",t.doneFilter)}},modules:{}})),Pe=n(6553),Me=n.n(Pe);const Le=(0,a.ri)(u);Le.use(Me()),Le.use(je),Le.use(Ue),Le.mount("#app")}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,s){if(!a){var r=1/0;for(c=0;c<e.length;c++){a=e[c][0],o=e[c][1],s=e[c][2];for(var l=!0,i=0;i<a.length;i++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](a[i])}))?a.splice(i--,1):(l=!1,s<r&&(r=s));if(l){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,o,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,s,r=a[0],l=a[1],i=a[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(i)var c=i(n)}for(t&&t(a);u<r.length;u++)s=r[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},a=self["webpackChunkapp"]=self["webpackChunkapp"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(8326)}));a=n.O(a)})();
//# sourceMappingURL=app.e3b820f1.js.map