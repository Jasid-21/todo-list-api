(function(){"use strict";var e={7179:function(e,t,n){var a=n(9242),o=n(3396);function s(e,t){const n=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(n)}var l=n(89);const r={},i=(0,l.Z)(r,[["render",s]]);var u=i,c=n(2483);const d={class:"home"},m={class:"body_container"};function _(e,t,n,a,s,l){const r=(0,o.up)("Navbar"),i=(0,o.up)("TaskCreator"),u=(0,o.up)("TaskCard");return(0,o.wg)(),(0,o.iD)("div",d,[(0,o.Wm)(r),(0,o._)("div",m,[(0,o.Wm)(i),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.data,((e,t)=>((0,o.wg)(),(0,o.j4)(u,{key:t,name:e.Task_name,done_state:e.Done,max_date:e.Max_date,desc:e.task_desc,task_id:e.Id},null,8,["name","done_state","max_date","desc","task_id"])))),128))])])}var p=n(7139);const v=e=>((0,o.dD)("data-v-66daf025"),e=e(),(0,o.Cn)(),e),f=v((()=>(0,o._)("h1",null,"My Tasks",-1))),g={key:0},k=["onClick"];function w(e,t,n,a,s,l){const r=(0,o.up)("router-link"),i=(0,o.up)("CollapseIcon");return(0,o.wg)(),(0,o.iD)("nav",null,[f,a.size>=480?((0,o.wg)(),(0,o.iD)("ul",g,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.options,((e,t)=>((0,o.wg)(),(0,o.iD)("li",{key:t,onClick:t=>a.setFilter(e.done),class:(0,p.C_)({active:e.active})},(0,p.zw)(e.name),11,k)))),128)),(0,o._)("li",null,[a.logged?((0,o.wg)(),(0,o.j4)(r,{key:0,to:"/login",onClick:a.logout},{default:(0,o.w5)((()=>[(0,o.Uk)("Logout")])),_:1},8,["onClick"])):((0,o.wg)(),(0,o.j4)(r,{key:1,to:"/login"},{default:(0,o.w5)((()=>[(0,o.Uk)("Login")])),_:1}))])])):(0,o.kq)("",!0),a.size<480?((0,o.wg)(),(0,o.j4)(i,{key:1,options:a.options},null,8,["options"])):(0,o.kq)("",!0)])}var h=n(4870);const y=e=>((0,o.dD)("data-v-0a1cfc8a"),e=e(),(0,o.Cn)(),e),D={class:"collapse-icon-container"},O=y((()=>(0,o._)("div",{class:"icon"},null,-1))),T=[O];function b(e,t,n,a,s,l){const r=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",D,[(0,o._)("div",{class:"collapse-icon",onClick:t[0]||(t[0]=()=>a.display=!a.display)},T),(0,o._)("ul",{class:(0,p.C_)(["collapse-list",{displayed:a.display}])},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.options,((e,t)=>((0,o.wg)(),(0,o.iD)("li",{key:t},(0,p.zw)(e.name),1)))),128)),(0,o._)("li",null,[(0,o.Wm)(r,{to:"/login"},{default:(0,o.w5)((()=>[(0,o.Uk)("Logout")])),_:1})])],2)])}var C={name:"CollapseIcon",props:["options"],setup(){const e=(0,h.iH)(!1);return{display:e}}};const I=(0,l.Z)(C,[["render",b],["__scopeId","data-v-0a1cfc8a"]]);var S=I,x=n(65),F={name:"Navbar",components:{CollapseIcon:S},setup(){const e=(0,x.oR)(),t=(0,h.iH)([{name:"All",done:null,active:!0},{name:"Pending",done:!1,active:!1},{name:"Done",done:!0,active:!1}]),n=(0,h.iH)(0),a=n=>{e.commit("setFilter",n),t.value.forEach((e=>{console.log(e),console.log(n),e.done==n?(console.log("Enter"),e.active=!0):e.active=!1}))},s=()=>{window.addEventListener("resize",(()=>{l()}))},l=()=>{n.value=window.innerWidth},r=(0,h.iH)(!1),i=localStorage.getItem("TODO_lst_user_id"),u=localStorage.getItem("TODO_lst_token"),c=()=>{const e=`/logout?token=${u}`;fetch(e,{method:"POST"}).then((e=>{200==e.status&&(localStorage.removeItem("TODO_lst_user_id"),localStorage.removeItem("TODO_lst_token"),localStorage.removeItem("TODO_lst_username"))}))};return i&&u&&(r.value=!0),(0,o.bv)((()=>{s(),l()})),{options:t,size:n,logged:r,setFilter:a,logout:c}}};const U=(0,l.Z)(F,[["render",w],["__scopeId","data-v-66daf025"]]);var $=U;const j={class:"task_card"},A={class:"upper"},H={class:"name"},P={class:"description"},M={class:"lower"},V={class:"max_date"};function z(e,t,n,s,l,r){return(0,o.wg)(),(0,o.iD)("div",j,[(0,o._)("button",{class:"delete",onClick:t[0]||(t[0]=(0,a.iM)(((...e)=>s.deleteTask&&s.deleteTask(...e)),["prevent"]))},"x"),(0,o._)("div",A,[(0,o._)("h3",H,(0,p.zw)(n.name),1),(0,o._)("h4",{class:(0,p.C_)(["done_state",{done:1==n.done_state}])},(0,p.zw)(n.done_state?"Done":"Pending"),3)]),(0,o._)("div",P,(0,p.zw)(""!=n.desc?n.desc:"..."),1),(0,o._)("div",M,[(0,o._)("span",V,(0,p.zw)(""!=n.max_date?n.max_date:"Not set"),1),n.done_state?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("button",{key:0,class:"mark_done",onClick:t[1]||(t[1]=(0,a.iM)(((...e)=>s.markAsDone&&s.markAsDone(...e)),["prevent"]))}," Mark as done "))])])}var E={name:"TaskCard",props:["task_id","name","done_state","max_date","desc"],setup(e){const t=e.task_id,n=localStorage.getItem("TODO_lst_user_id"),a=localStorage.getItem("TODO_lst_token"),o=(0,x.oR)(),s=async()=>{if(!confirm("Are you sure you want to delete this task?"))return;const e=`/delete_task?user_id=${n}&token=${a}&task_id=${t}`,s=await fetch(e,{method:"POST"}),l=s.status;if(200==l)alert("Task deleted successfully!"),o.dispatch("deleteTask",t);else{const e=await s.json();e.msg&&alert(e.msg)}},l=async()=>{const e=`/update_task_state?user_id=${n}&token=${a}&task_id=${t}`,s=await fetch(e,{method:"POST"}),l=s.status;if(200==l)o.dispatch("markAsDone",t);else{const e=await s.json();e.msg&&alert(e.msg)}};return{deleteTask:s,markAsDone:l}}};const L=(0,l.Z)(E,[["render",z],["__scopeId","data-v-e3ae825a"]]);var Z=L;const R=e=>((0,o.dD)("data-v-bd0f2d3a"),e=e(),(0,o.Cn)(),e),q={key:0,class:"circle"},W=R((()=>(0,o._)("span",null,"+",-1))),N=[W],K=R((()=>(0,o._)("h4",null,"New task form",-1)));function Y(e,t,n,s,l,r){return(0,o.wg)(),(0,o.iD)("div",{class:"taskCreator",onClick:t[6]||(t[6]=()=>s.formActive=!s.formActive)},[s.formActive?((0,o.wg)(),(0,o.iD)("form",{key:1,onClick:t[5]||(t[5]=(0,a.iM)((()=>{}),["stop"]))},[(0,o._)("button",{class:"close_btn",onClick:t[0]||(t[0]=(0,a.iM)((()=>s.formActive=!1),["prevent"]))},"x"),K,(0,o.wy)((0,o._)("input",{type:"text",placeholder:"Type a task name...","onUpdate:modelValue":t[1]||(t[1]=e=>s.name=e)},null,512),[[a.nr,s.name]]),(0,o.wy)((0,o._)("textarea",{cols:"30",rows:"10","onUpdate:modelValue":t[2]||(t[2]=e=>s.desc=e),placeholder:"Type a description (optional)..."},null,512),[[a.nr,s.desc]]),(0,o.wy)((0,o._)("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=e=>s.date=e)},null,512),[[a.nr,s.date]]),(0,o._)("input",{type:"submit",value:"Create!",onClick:t[4]||(t[4]=(0,a.iM)(((...e)=>s.createTask&&s.createTask(...e)),["prevent"]))})])):((0,o.wg)(),(0,o.iD)("div",q,N))])}var G={name:"taskCreator",setup(){const e=(0,x.oR)(),t=(0,h.iH)(!1),n=(0,h.iH)(""),a=(0,h.iH)(""),o=(0,h.iH)((new Date).toISOString().slice(0,10)),s=async()=>{const t=localStorage.getItem("TODO_lst_token"),s=localStorage.getItem("TODO_lst_user_id"),l=`/new_task?token=${t}&user_id=${s}&name=${n.value}&desc=${a.value}&date=${o.value}`,r=await fetch(l,{method:"POST"}),i=r.status,u=await r.json();if(200==i){const t={Id:u.task_id,Task_name:n.value,task_desc:a.value,Max_date:o.value,User_id:s,Done:!1};e.dispatch("newTask",t),n.value="",a.value=""}else alert(u.msg)};return{formActive:t,name:n,desc:a,date:o,createTask:s}}};const B=(0,l.Z)(G,[["render",Y],["__scopeId","data-v-bd0f2d3a"]]);var J=B,Q={name:"HomeView",components:{Navbar:$,TaskCard:Z,TaskCreator:J},setup(){const e=(0,x.oR)(),t=(0,o.Fl)((()=>e.state.filtered));return(0,o.bv)((async()=>{const t=localStorage.getItem("TODO_lst_user_id"),n=localStorage.getItem("TODO_lst_token"),a=`/home_info?user_id=${t}&token=${n}`,o=await fetch(a,{method:"GET"}),s=o.status;if(200==s){const t=await o.json();console.log(t),e.commit("setAll",t)}})),{data:t}}};const X=(0,l.Z)(Q,[["render",_],["__scopeId","data-v-700bccfc"]]);var ee=X;const te=e=>((0,o.dD)("data-v-0a2e20de"),e=e(),(0,o.Cn)(),e),ne={class:"masterContainer"},ae=te((()=>(0,o._)("h2",null,"Login Form",-1))),oe=te((()=>(0,o._)("label",{for:"user"},"Username:",-1))),se=te((()=>(0,o._)("br",null,null,-1))),le=te((()=>(0,o._)("label",{for:"pass"},"Password:",-1))),re=te((()=>(0,o._)("br",null,null,-1))),ie=te((()=>(0,o._)("input",{type:"submit",value:"Login!"},null,-1))),ue=te((()=>(0,o._)("br",null,null,-1)));function ce(e,t,n,s,l,r){const i=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",ne,[(0,o._)("form",{class:"loginForm",onSubmit:t[2]||(t[2]=(0,a.iM)(((...e)=>s.submit&&s.submit(...e)),["prevent"]))},[ae,oe,(0,o.wy)((0,o._)("input",{type:"text",name:"user",placeholder:"Ex: sefirot123","onUpdate:modelValue":t[0]||(t[0]=e=>s.user=e)},null,512),[[a.nr,s.user]]),se,le,(0,o.wy)((0,o._)("input",{type:"password",name:"pass","onUpdate:modelValue":t[1]||(t[1]=e=>s.pass=e)},null,512),[[a.nr,s.pass]]),re,ie,ue,(0,o._)("span",null,[(0,o.Uk)(" Do not have an account? "),(0,o.Wm)(i,{to:"/register"},{default:(0,o.w5)((()=>[(0,o.Uk)("Signup!!")])),_:1})])],32)])}var de={name:"LoginView",setup(){const e=()=>{const e=`/login?username=${n.value}&password=${a.value}`;fetch(e,{method:"POST"}).then((e=>(200!=e.status&&console.log(e.status),e.json()))).then((e=>{e.msg?alert(e.msg):(localStorage.setItem("TODO_lst_token",e.token),localStorage.setItem("TODO_lst_user_id",e.user_id),localStorage.setItem("TODO_lst_username",n.value),t.replace("/"))}))},t=(0,c.tv)(),n=(0,h.iH)(""),a=(0,h.iH)("");return{user:n,pass:a,submit:e}}};const me=(0,l.Z)(de,[["render",ce],["__scopeId","data-v-0a2e20de"]]);var _e=me;const pe=e=>((0,o.dD)("data-v-bfae6732"),e=e(),(0,o.Cn)(),e),ve={class:"masterContainer"},fe=pe((()=>(0,o._)("h2",null,"Register Form",-1))),ge=pe((()=>(0,o._)("label",{for:"user"},"Username:",-1))),ke=pe((()=>(0,o._)("br",null,null,-1))),we=pe((()=>(0,o._)("label",{for:"pass"},"Password:",-1))),he=pe((()=>(0,o._)("br",null,null,-1))),ye=pe((()=>(0,o._)("label",{for:"conf"},"Confirm password:",-1))),De=pe((()=>(0,o._)("br",null,null,-1))),Oe=pe((()=>(0,o._)("input",{type:"submit",value:"Register!"},null,-1))),Te=pe((()=>(0,o._)("br",null,null,-1)));function be(e,t,n,s,l,r){const i=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",ve,[(0,o._)("form",{class:"loginForm",onSubmit:t[3]||(t[3]=(0,a.iM)(((...e)=>s.submit&&s.submit(...e)),["prevent"]))},[fe,ge,(0,o.wy)((0,o._)("input",{type:"text",name:"user",placeholder:"Ex: sefirot123","onUpdate:modelValue":t[0]||(t[0]=e=>s.user=e),required:""},null,512),[[a.nr,s.user]]),ke,we,(0,o.wy)((0,o._)("input",{type:"password",name:"pass","onUpdate:modelValue":t[1]||(t[1]=e=>s.pass=e),required:""},null,512),[[a.nr,s.pass]]),he,ye,(0,o.wy)((0,o._)("input",{type:"password",name:"conf","onUpdate:modelValue":t[2]||(t[2]=e=>s.conf=e),required:""},null,512),[[a.nr,s.conf]]),De,Oe,Te,(0,o._)("span",null,[(0,o.Uk)(" Alredy have an account? "),(0,o.Wm)(i,{to:"/login"},{default:(0,o.w5)((()=>[(0,o.Uk)("Login!!")])),_:1})])],32)])}var Ce={name:"RegisterView",setup(){const e=()=>{console.log(n.value),console.log(a.value),a.value!=o.value&&alert("Passwords doesn't match...");const e=`/register?username=${n.value}&password=${a.value}`;fetch(e,{method:"POST"}).then((e=>(200!=e.status&&console.log(e.status),e.json()))).then((e=>{console.log(e),e.msg?alert(e.msg):(localStorage.setItem("TODO_lst_token",e.token),localStorage.setItem("TODO_lst_user_id",e.user_id),localStorage.setItem("TODO_lst_username",n.value),t.replace("/"))}))},t=(0,c.tv)(),n=(0,h.iH)(""),a=(0,h.iH)(""),o=(0,h.iH)("");return{user:n,pass:a,conf:o,submit:e}}};const Ie=(0,l.Z)(Ce,[["render",be],["__scopeId","data-v-bfae6732"]]);var Se=Ie;const xe=[{path:"/",name:"home",component:ee},{path:"/login",name:"login",component:_e},{path:"/register",name:"register",component:Se}],Fe=(0,c.p7)({history:(0,c.PO)(),routes:xe});var Ue=Fe,$e=(n(7658),(0,x.MT)({state:{all:[],filtered:[],doneFilter:null},mutations:{setAll:(e,t)=>{e.all=t,e.filtered=t},setFilter:(e,t)=>{if(e.doneFilter=t,null==t)return void(e.filtered=e.all);const n=e.all.filter((e=>e.Done==t));e.filtered=n,console.log(e.filtered)},newTask:(e,t)=>{e.all.push(t)},deleteTask:(e,t)=>{const n=e.all.findIndex((e=>e.Id==t));e.all.splice(n,1)},markAsDone:(e,t)=>{e.all.forEach((e=>{e.Id==t&&(e.Done=!0)}))}},actions:{newTask:({commit:e,state:t},n)=>{e("newTask",n),e("setFilter",t.doneFilter)},deleteTask:({commit:e,state:t},n)=>{e("deleteTask",n),e("setFilter",t.doneFilter)},markAsDone:({commit:e,state:t},n)=>{e("markAsDone",n),e("setFilter",t.doneFilter)}},modules:{}}));(0,a.ri)(u).use($e).use(Ue).mount("#app")}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,s){if(!a){var l=1/0;for(c=0;c<e.length;c++){a=e[c][0],o=e[c][1],s=e[c][2];for(var r=!0,i=0;i<a.length;i++)(!1&s||l>=s)&&Object.keys(n.O).every((function(e){return n.O[e](a[i])}))?a.splice(i--,1):(r=!1,s<l&&(l=s));if(r){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,o,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,s,l=a[0],r=a[1],i=a[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(i)var c=i(n)}for(t&&t(a);u<l.length;u++)s=l[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},a=self["webpackChunkapp"]=self["webpackChunkapp"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(7179)}));a=n.O(a)})();
//# sourceMappingURL=app.0a25d5f9.js.map